############################################################## 
#  p.189  10. 그 밖의 기본사항 
#------------------------------------------------------------------------------------------ 
#  p.189  10.1 도움말 보기 
#------------------------------------------------------------------------------------------ 
 
# 'help()' => HTML 브라우저를 통한 온라인 도움말을 이용할 수 있다. 
# ?명령어 => HTML 브라우저를 통한 온라인 도움말을 이용할 수 있다. 
# 'help.start()' => HTML 브라우저에 의한 도움말을 사용할 수 있다. 
 
#------------------------------------------------------------------------------------------ 
#  p.189  1) log() 함수 도움말 보기 예 
#------------------------------------------------------------------------------------------ 
 
# 방법 1 : 브라우저를 통한 온라인 도움말. 
help(log)  
 
# 방법 2 : 브라우저를 통한 온라인 도움말. 
?log 
 
# 방법 3 : 함수의 인수를 알고 싶은 때 
args(log)    # 함수의 인수를 알고 싶을 때  
 
#------------------------------------------------------------------------------------------ 
#  p.192  2) for 등의 예약어나 [ 등의 특수 기호 설명 보기 예 => 브라우저 화면에 출력 
#------------------------------------------------------------------------------------------ 
 
help("for")  
 
#------------------------------------------------------------------------------------------ 
#  p.192  3) solve라는 기능이 있는 함수를 찾고 싶을 때 => 브라우저 화면에 출력 
#------------------------------------------------------------------------------------------ 
 
help.search("solve") 
 
#------------------------------------------------------------------------------------------ 
#  p.192  4) 함수 solve() 의 사용법만 보고 싶을 때 => R 화면에 출력 
#------------------------------------------------------------------------------------------ 
 
example(solve)  
 
#------------------------------------------------------------------------------------------ 
#  단, 그래프를 출력하는 예제에서 그래프가 여러 개일 때, example()을 실행하며 
#      그래프가 한번에 다 표시된다. 이 때, 다음과 같이 정의하면 그래프를 그릴 때  
#      마다 정지하게 된다. 
#------------------------------------------------------------------------------------------ 
 
par(ask = TRUE)  
 
 
###############################################################  p.195  10.2 패키지 
#------------------------------------------------------------------------------------------ 
#  p.195  10.2.1 패키지 읽어 들이기 
#------------------------------------------------------------------------------------------ 
 
#------------------------------------------------------------------------------------------ 
#  p.195  1) 준비된 패키지 보기 
#------------------------------------------------------------------------------------------ 

library() 
 
#------------------------------------------------------------------------------------------ 
#  p.195  2) rgl 이라는 패키지 읽어 들이기 
#------------------------------------------------------------------------------------------ 
 
library(rgl) 
 
############################################################## 
#  p.197  10.2.2 패키지 조작 : library(help="패키지명") 
#         예) rgl 이라는 패키지에 포함된 함수 목록 보기 
#------------------------------------------------------------------------------------------ 
 
library(help=rgl) 
 
#------------------------------------------------------------------------------------------ 
#  p.197  패키지 조작 명령 표 <표10-3> 
#------------------------------------------------------------------------------------------ 
#	libarary("패키지명")	지정한 패키지를 사용한다. 
#------------------------------------------------------------------------------------------ 
#	search()	현재 읽어들인 패키지 목록을 본다. 
#------------------------------------------------------------------------------------------ 
#	libarary(help="패키지명")	읽어 온 패키지의 오브젝트 목록을 보여준다. 
#------------------------------------------------------------------------------------------ 
#	detach("package:패키지명")	패키지를 언로드한다. 
#------------------------------------------------------------------------------------------ 
 
############################################################## 
#  p.197  10.2.3 패키지 설치 
#------------------------------------------------------------------------------------------ 
#	메인 메뉴의 [패키지들] 메뉴 이용 
#------------------------------------------------------------------------------------------ 
#	1. 패키지 불러오기	=> 설치되어 있는 패키지 불러오기 
#     -------------------- 
#	2. CRAM 미러 설정...	=> CRAN 미러 사이트 설정하기 
#	3. 저장소 선택... 
#	4. 패키지(들) 설치하기... 
#	5. 패키지 업데이트... 
#     -------------------- 
#	6. Install Package)s) from local files...	=> 다운로드 받은 패키지 설치하기 
#------------------------------------------------------------------------------------------ 
 
options(repos="http://cran.md.tsukuba.ac.jp") 
install.packages("rgl") 
install.packages("C:/rgl_0.82.zip", repos=NULL) 
update.packages(ask=F, destdir=".") 
 
############################################################## 
#  p.201  10.3 R에 의한 계산과 수학함수 
#------------------------------------------------------------------------------------------ 
#  p.201  10.3.1 대입 
#------------------------------------------------------------------------------------------ 
 
x <- pi/2                     # 권장  
pi/2 -> x 
x = pi/2 
assign("x", pi/2) 
 
#------------------------------------------------------------------------------------------ 
#  p.201  10.3.2 R의 수학함수 
#------------------------------------------------------------------------------------------ 
 
sqrt( c(1,2,3,4,5) )          # 1 ... 5 각각에 대해 평방근을 구한다  
 
#------------------------------------------------------------------------------------------ 
#  p.201  10.3.3 감마함수 
#------------------------------------------------------------------------------------------ 
 
 
 
#------------------------------------------------------------------------------------------ 
#  p.202  10.3.4 계승의 계산 : factorial(n) = (n! = 1*2* ... *n) 
#------------------------------------------------------------------------------------------ 
 
factorial(3) 
 
#------------------------------------------------------------------------------------------ 
#  p.203  10.3.5 베셀함수 
#  [참고자료] https://ko.wikipedia.org/wiki/%EB%B2%A0%EC%85%80_%ED%95%A8%EC%88%98 
#------------------------------------------------------------------------------------------ 
 
 
############################################################## 
#  p.203  10.4 사용한 변수(오브젝트)의 확인과 제거 
#------------------------------------------------------------------------------------------ 
 
objects() 
objects(all=TRUE)             # 도트로 시작되는 파일(숨겨진 오브젝트)를 표시  
rm(x)                         # 오브젝트 x를 삭제할 때  
rm(list=ls(all=TRUE))         # 모든 오브젝트를 삭제할 때  
 
############################################################## 
#  p.204  10.5 함수와 연산자 
#------------------------------------------------------------------------------------------ 
#  p.204  10.5.1 함수의 정의 보기 
#------------------------------------------------------------------------------------------ 
#	예) 함수 sd()의 정의보기 
#------------------------------------------------------------------------------------------ 
 
sd 
 
mean 
methods(mean) 
mean.default 
 
 
#------------------------------------------------------------------------------------------ 
#  p.206  10.5.2 비교 연산자 
#------------------------------------------------------------------------------------------ 
 
x <- 1;   y <- 1.;   z <- 1.00000000001; 
if (x == y)                        # 일반적인 동일  판단  
identical(all.equal(x, z), TRUE)   # R이 권장하는 동일 판단  
identical(1, 1.)                   # 1과 1.은 모두 배정도실수  
identical(1, as.integer(1))        # as.integer(1)은 정수형이므로 FALSE가 된다  
 
 
x <- 1;   y <- 1.;   u <- 2; 
all.equal(x, y) 
all.equal(x, u) 
 
 
#------------------------------------------------------------------------------------------ 
#  p.208  10.5.3 논리 연산자 
#------------------------------------------------------------------------------------------ 
 
x <- 1;  y <- 2; 
(x > 0) && (y > 0) 
z <- c(3, 4, 5) 
( z > c(4, 4, 4) ) | ( z < c(3, 3, 3) ) 
 
#------------------------------------------------------------------------------------------ 
#  p.209  10.5.4 인수의 생략 
#------------------------------------------------------------------------------------------ 
 
log(x)    # base 생략 시엔 base=2.71828182845905로 해서 계산  
 
log(x, 2.718281828) 
 
log(base=2.718281828, x) 
 
log(x <- 2) 

x <- 2 
log(x) 


 
############################################################## 
#  p.210  10.6 반올림, 올림, 내림과 수치연산 오차 
#------------------------------------------------------------------------------------------ 
#  p.210  10.6.1 반올림, 올림, 내림 
#------------------------------------------------------------------------------------------ 
 
 
#------------------------------------------------------------------------------------------ 
#  p.211  10.6.2 수치연산 오차 
#------------------------------------------------------------------------------------------ 
 
0.6-0.3-0.3 
0.6-0.4-0.2 
 
 
round( 0.6-0.4-0.2 ) 
 
 
############################################################## 
#  p.212  10.7 계산 방법과 계산 속도 
#------------------------------------------------------------------------------------------ 

n <- 1000000 
x <- runif(n) 
y <- runif(n) 
system.time( x * y )[3] 
system.time( for (i in 1:n) x[i] * y[i] )[3] 
 
 
n <- 1000000 
m <- sqrt(n) 
x <- matrix(runif(n), m) 
y <- matrix(runif(n), m) 
task1 <- function() { x * y } 
task2 <- function() for (i in 1:m) for (j in 1:m) x[i,j] * y[i,j] 
system.time(task1())[3] 
system.time(task2())[3] 
 
system.time( mymontecarlo2(100000, 1, rnorm) )[3] 
system.time( mean(rnorm(100000)) )[3] 
 
 
 
n <- 10000000 
mycointoss1 <- function(n) { 
  count <- 0 
  for (i in 1:n) if (coin() == 1) count <- count + 1 
  return(count) 
}

mycointoss2 <- function(n) { 
  count <- 0 
  for (i in 1:n) count <- count + coin() 
  return(count) 
} 

system.time(mycointoss1(n))[3] 
system.time(mycointoss2(n))[3] 


 
mycointoss3 <- function(n) { 
  count <- runif(n) 
  return( length(count[count <= 0.5]) ) 
} 

system.time(mycointoss3(n))[3] 